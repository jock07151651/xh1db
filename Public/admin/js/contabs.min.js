define(function(require,exports,module){var layer=require('layer');var app=require('app');function t(t){var e=0;return $(t).each(function(){e+=$(this).outerWidth(!0)}),e}function e(e){var a=t($(e).prevAll()),i=t($(e).nextAll()),n=t($(".content-tabs").children().not(".J_menuTabs")),s=$(".content-tabs").outerWidth(!0)-n,r=0;if($(".page-tabs-content").outerWidth()<s)r=0;else if(i<=s-$(e).outerWidth(!0)-$(e).next().outerWidth(!0)){if(s-$(e).next().outerWidth(!0)>i){r=a;for(var o=e;r-$(o).outerWidth()>$(".page-tabs-content").outerWidth()-s;)r-=$(o).prev().outerWidth(),o=$(o).prev()}}else a>s-$(e).outerWidth(!0)-$(e).prev().outerWidth(!0)&&(r=a-$(e).prev().outerWidth(!0));$(".page-tabs-content").animate({marginLeft:0-r+"px"},"fast")}function a(){if($(".J_menuTab.active").prev(".J_menuTab").size()){var currObj=$(".J_menuTab.active");var load_page=$(".J_menuTab.active").prev(".J_menuTab:last").attr('data-id');app.load_page(load_page);$(".J_menuTab.active").prev(".J_menuTab:last").addClass("active");currObj.removeClass('active')}}function i(){if($(".J_menuTab.active").next(".J_menuTab").size()){var currObj=$(".J_menuTab.active");var load_page=$(".J_menuTab.active").next(".J_menuTab:last").attr('data-id');app.load_page(load_page);$(".J_menuTab.active").next(".J_menuTab:last").addClass("active");currObj.removeClass('active')}}function n(){var t=$(this).attr("href"),a=$(this).data("index"),i=$.trim($(this).text()),n=!0;if(void 0==t||0==$.trim(t).length)return!1;if($(".J_menuTab").each(function(){return $(this).data("id")==t?($(this).hasClass("active")||($(this).addClass("active").siblings(".J_menuTab").removeClass("active"),e(this),$(".J_mainContent .J_iframe").each(function(){return $(this).data("id")==t?($(this).show().siblings(".J_iframe").hide(),!1):void 0})),n=!1,!1):void 0}),n){var s='<a href="javascript:;" class="active J_menuTab" data-id="'+t+'">'+i+' <i class="fa fa-times-circle"></i></a>';$(".J_menuTab").removeClass("active");$(".J_menuTabs .page-tabs-content").append(s),e($(".J_menuTab.active"))}return!1}function s(){var t=$(this).parents(".J_menuTab").data("id"),a=$(this).parents(".J_menuTab").width();if($(this).parents(".J_menuTab").hasClass("active")){if($(this).parents(".J_menuTab").next(".J_menuTab").size()){var load_page=$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").attr('data-id');var i=$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").data("id");app.load_page(load_page);$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").addClass("active");var n=parseInt($(".page-tabs-content").css("margin-left"));0>n&&$(".page-tabs-content").animate({marginLeft:n+a+"px"},"fast");$(this).parents(".J_menuTab").remove()}if($(this).parents(".J_menuTab").prev(".J_menuTab").size()){var load_page=$(this).parents(".J_menuTab").prev(".J_menuTab:last").attr('data-id');var i=$(this).parents(".J_menuTab").prev(".J_menuTab:last").data("id");app.load_page(load_page);$(this).parents(".J_menuTab").prev(".J_menuTab:last").addClass("active");$(this).parents(".J_menuTab").remove()}}else $(this).parents(".J_menuTab").remove();e($(".J_menuTab.active"));return!1}function r(){$(".page-tabs-content").children("[data-id]").not(":first").not(".active").each(function(){$(this).remove()}),$(".page-tabs-content").css("margin-left","0")}function o(){e($(".J_menuTab.active"))}function d(){if(!$(this).hasClass("active")){var t=$(this).data("id");$(this).addClass("active").siblings(".J_menuTab").removeClass("active");e(this)}}$("body .J_menuItem").each(function(t){$(this).attr("data-index")||$(this).attr("data-index",t)}),$('body').delegate('.J_menuItem','click',n),$(".J_menuTabs").on("click",".J_menuTab i",s),$(".J_tabCloseOther").on("click",r),$(".J_tabShowActive").on("click",o),$(".J_menuTabs").on("click",".J_menuTab",d),$(".J_tabLeft").on("click",a),$(".J_tabRight").on("click",i),$(".J_tabCloseAll").on("click",function(){$(".page-tabs-content").children("[data-id]").not(":first").each(function(){$(this).remove()}),$(".page-tabs-content").children("[data-id]:first").each(function(){$(this).addClass("active");app.load_page($(this).attr('data-id'))}),$(".page-tabs-content").css("margin-left","0")})});